{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/deck.js","js/hand.js","js/helper.js","js/main.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Helper from './helper';\n\nexport default class Deck {\n  constructor() {\n    const suits = ['hearts', 'clubs', 'spades', 'diamonds'];\n    const faces = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'j', 'q', 'k', 'a'];\n    const types = ['two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine',\n    'ten', 'jack', 'queen', 'king', 'ace'];\n\n    this.cards = suits.reduce((acc, suit) => {\n      faces.forEach((face, index) => {\n        acc.push({suit: suit, face: face, type: types[index], value: index + 1})\n      });\n      return acc;\n    }, []);\n  }\n\n  shuffle() {\n    Helper.shuffler(this.cards);\n  }\n\n  deal(hands) {\n    this.cards.forEach((card, index) => {\n      let hand = hands[index%hands.length];\n      hand.take(card);\n    });\n  }\n}","export default class Hand {\n  constructor(name) {\n    this.name = name;\n    this.cards = [];\n  }\n\n  play() {\n    return this.cards ? this.cards.shift() : null;\n  }\n\n  take(card) {\n    this.cards.push(card);\n  }\n}","const Helper = {\n  shuffler: function(cards) {\n    var m = cards.length, t, i;\n    // While there remain elements to shuffle\n    while (m) {\n      // Pick a remaining element\n      i = Math.floor(Math.random() * m--);\n      // And swap it with the current element\n      t = cards[m];\n      cards[m] = cards[i];\n      cards[i] = t;\n    }\n  }\n}\n\nexport default Helper;","import Deck from './deck';\nimport Hand from './hand';\nimport Helper from './helper';\n\nconst deck = new Deck();\nlet hands = [\n  new Hand('player'),\n  new Hand('computer')\n];\n\nlet war = false;\nlet wars = 0;\nlet rounds = 0;\nlet maxSwing = 0;\nlet pool = [];\nlet playerDeck = document.querySelector('.player .deck');\n\nconst round = function() {\n  rounds++;\n  let plays = play(war);\n  show(plays);\n  let result = resolve(plays);\n  let winner = result.length > 1 ? null : result[0];\n  war = !winner;\n  if (winner) {\n    // console.log(winner.player);\n    reward(winner.player);\n  }\n  count();\n  console.log('::=====-----=====::');\n}\n\nconst play = function(war) {\n  console.log('playing');\n  if (war) console.log('warring');\n  if (war) wager();\n  if (war) wars++;\n  let plays = hands.map(hand => {\n    return {\n      player: hand.name,\n      card: hand.play()\n    }\n  });\n  plays.forEach(play => { pool.push(play.card); });\n  return(plays);\n}\n\nconst show = function(plays) {\n  console.log('showing');\n  plays.forEach(play => {\n    let elem = document.querySelector(`.${play.player} .play`);\n    let img = `img/cards/${play.card.suit}${play.card.face}.png`;\n    elem.style.backgroundImage = `url(${img})`;\n  });\n}\n\nconst resolve = function(plays) {\n  console.log('resolving');\n  let max = Math.max.apply(Math, plays.map(play => play.card.value));\n  return plays.reduce((acc, play) => {\n    if (play.card.value === max) acc.push(play);\n    return acc;\n  }, []);\n}\n\nconst wager = function() {\n  console.log('wagering');\n  hands.forEach(hand => {\n    pool.push(hand.play());\n  });\n}\n\nconst reward = function(winner) {\n  console.log('rewarding');\n  console.log('swing', pool.length);\n  maxSwing = pool.length > maxSwing ? pool.length : maxSwing;\n  Helper.shuffler(pool);\n  hands.forEach(hand => {\n    if (hand.name === winner) {\n      while (pool.length > 0) {\n        hand.take(pool.shift());\n      }\n    }\n  })\n}\n\nconst count = function() {\n  console.log('counting');\n  hands.forEach(hand => {\n    let elem = document.querySelector(`.${hand.name} .count`);\n    if (hand.cards.length === 0) loser(hand.name);\n    elem.innerHTML = hand.cards.length.toString();\n  });\n}\n\nconst loser = function(player) {\n  let remove = hands.reduce((acc, hand, index) => {\n    return hand.cards.length === 0 ? index : acc;\n  }, 0);\n  hands.splice(remove, 1);\n  victor();\n}\n\nconst victor = function() {\n  if (hands.length === 1) {\n    clearInterval(intervalId);\n    let winner = hands.shift();\n    reward(winner.player);\n    count();\n    console.log(winner.name, 'wins!');\n    console.log(rounds, 'rounds played!');\n    console.log(wars, 'wars fought!');\n    console.log(maxSwing, 'was the highest card swing!');\n  }\n}\n\ndeck.shuffle();\ndeck.deal(hands);\n\ncount();\n\nlet intervalId;\nplayerDeck.addEventListener('click', round);\nwindow.addEventListener('keyup', evt => {\n  if (evt.keyCode === 32) {\n    if (intervalId) clearInterval(intervalId);\n    intervalId = setInterval(round, 50);\n  }\n})\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqc1xcZGVjay5qcyIsImpzXFxoYW5kLmpzIiwianNcXGhlbHBlci5qcyIsImpzXFxtYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7SUFFcUIsSTtBQUNuQixrQkFBYztBQUFBOztBQUNaLFFBQU0sUUFBUSxDQUFDLFFBQUQsRUFBVyxPQUFYLEVBQW9CLFFBQXBCLEVBQThCLFVBQTlCLENBQWQ7QUFDQSxRQUFNLFFBQVEsQ0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEdBQVgsRUFBZ0IsR0FBaEIsRUFBcUIsR0FBckIsRUFBMEIsR0FBMUIsRUFBK0IsR0FBL0IsRUFBb0MsR0FBcEMsRUFBeUMsSUFBekMsRUFBK0MsR0FBL0MsRUFBb0QsR0FBcEQsRUFBeUQsR0FBekQsRUFBOEQsR0FBOUQsQ0FBZDtBQUNBLFFBQU0sUUFBUSxDQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLE1BQWpCLEVBQXlCLE1BQXpCLEVBQWlDLEtBQWpDLEVBQXdDLE9BQXhDLEVBQWlELE9BQWpELEVBQTBELE1BQTFELEVBQ2QsS0FEYyxFQUNQLE1BRE8sRUFDQyxPQURELEVBQ1UsTUFEVixFQUNrQixLQURsQixDQUFkOztBQUdBLFNBQUssS0FBTCxHQUFhLE1BQU0sTUFBTixDQUFhLFVBQUMsR0FBRCxFQUFNLElBQU4sRUFBZTtBQUN2QyxZQUFNLE9BQU4sQ0FBYyxVQUFDLElBQUQsRUFBTyxLQUFQLEVBQWlCO0FBQzdCLFlBQUksSUFBSixDQUFTLEVBQUMsTUFBTSxJQUFQLEVBQWEsTUFBTSxJQUFuQixFQUF5QixNQUFNLE1BQU0sS0FBTixDQUEvQixFQUE2QyxPQUFPLFFBQVEsQ0FBNUQsRUFBVDtBQUNELE9BRkQ7QUFHQSxhQUFPLEdBQVA7QUFDRCxLQUxZLEVBS1YsRUFMVSxDQUFiO0FBTUQ7Ozs7OEJBRVM7QUFDUix1QkFBTyxRQUFQLENBQWdCLEtBQUss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QUNEO0FBQ0YsQ0FYRDs7QUFhQSxLQUFLLE9BQUw7QUFDQSxLQUFLLElBQUwsQ0FBVSxLQUFWOztBQUVBOztBQUVBLElBQUksbUJBQUo7QUFDQSxXQUFXLGdCQUFYLENBQTRCLE9BQTVCLEVBQXFDLEtBQXJDO0FBQ0EsT0FBTyxnQkFBUCxDQUF3QixPQUF4QixFQUFpQyxlQUFPO0FBQ3RDLE1BQUksSUFBSSxPQUFKLEtBQWdCLEVBQXBCLEVBQXdCO0FBQ3RCLFFBQUksVUFBSixFQUFnQixjQUFjLFVBQWQ7QUFDaEIsaUJBQWEsWUFBWSxLQUFaLEVBQW1CLEVBQW5CLENBQWI7QUFDRDtBQUNGLENBTEQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IEhlbHBlciBmcm9tICcuL2hlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlY2sge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zdCBzdWl0cyA9IFsnaGVhcnRzJywgJ2NsdWJzJywgJ3NwYWRlcycsICdkaWFtb25kcyddO1xuICAgIGNvbnN0IGZhY2VzID0gWycyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnMTAnLCAnaicsICdxJywgJ2snLCAnYSddO1xuICAgIGNvbnN0IHR5cGVzID0gWyd0d28nLCAndGhyZWUnLCAnZm91cicsICdmaXZlJywgJ3NpeCcsICdzZXZlbicsICdlaWdodCcsICduaW5lJyxcbiAgICAndGVuJywgJ2phY2snLCAncXVlZW4nLCAna2luZycsICdhY2UnXTtcblxuICAgIHRoaXMuY2FyZHMgPSBzdWl0cy5yZWR1Y2UoKGFjYywgc3VpdCkgPT4ge1xuICAgICAgZmFjZXMuZm9yRWFjaCgoZmFjZSwgaW5kZXgpID0+IHtcbiAgICAgICAgYWNjLnB1c2goe3N1aXQ6IHN1aXQsIGZhY2U6IGZhY2UsIHR5cGU6IHR5cGVzW2luZGV4XSwgdmFsdWU6IGluZGV4ICsgMX0pXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10pO1xuICB9XG5cbiAgc2h1ZmZsZSgpIHtcbiAgICBIZWxwZXIuc2h1ZmZsZXIodGhpcy5jYXJkcyk7XG4gIH1cblxuICBkZWFsKGhhbmRzKSB7XG4gICAgdGhpcy5jYXJkcy5mb3JFYWNoKChjYXJkLCBpbmRleCkgPT4ge1xuICAgICAgbGV0IGhhbmQgPSBoYW5kc1tpbmRleCVoYW5kcy5sZW5ndGhdO1xuICAgICAgaGFuZC50YWtlKGNhcmQpO1xuICAgIH0pO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGFuZCB7XG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuY2FyZHMgPSBbXTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZHMgPyB0aGlzLmNhcmRzLnNoaWZ0KCkgOiBudWxsO1xuICB9XG5cbiAgdGFrZShjYXJkKSB7XG4gICAgdGhpcy5jYXJkcy5wdXNoKGNhcmQpO1xuICB9XG59IiwiY29uc3QgSGVscGVyID0ge1xuICBzaHVmZmxlcjogZnVuY3Rpb24oY2FyZHMpIHtcbiAgICB2YXIgbSA9IGNhcmRzLmxlbmd0aCwgdCwgaTtcbiAgICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZVxuICAgIHdoaWxlIChtKSB7XG4gICAgICAvLyBQaWNrIGEgcmVtYWluaW5nIGVsZW1lbnRcbiAgICAgIGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtLS0pO1xuICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgICB0ID0gY2FyZHNbbV07XG4gICAgICBjYXJkc1ttXSA9IGNhcmRzW2ldO1xuICAgICAgY2FyZHNbaV0gPSB0O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIZWxwZXI7IiwiaW1wb3J0IERlY2sgZnJvbSAnLi9kZWNrJztcbmltcG9ydCBIYW5kIGZyb20gJy4vaGFuZCc7XG5pbXBvcnQgSGVscGVyIGZyb20gJy4vaGVscGVyJztcblxuY29uc3QgZGVjayA9IG5ldyBEZWNrKCk7XG5sZXQgaGFuZHMgPSBbXG4gIG5ldyBIYW5kKCdwbGF5ZXInKSxcbiAgbmV3IEhhbmQoJ2NvbXB1dGVyJylcbl07XG5cbmxldCB3YXIgPSBmYWxzZTtcbmxldCB3YXJzID0gMDtcbmxldCByb3VuZHMgPSAwO1xubGV0IG1heFN3aW5nID0gMDtcbmxldCBwb29sID0gW107XG5sZXQgcGxheWVyRGVjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXIgLmRlY2snKTtcblxuY29uc3Qgcm91bmQgPSBmdW5jdGlvbigpIHtcbiAgcm91bmRzKys7XG4gIGxldCBwbGF5cyA9IHBsYXkod2FyKTtcbiAgc2hvdyhwbGF5cyk7XG4gIGxldCByZXN1bHQgPSByZXNvbHZlKHBsYXlzKTtcbiAgbGV0IHdpbm5lciA9IHJlc3VsdC5sZW5ndGggPiAxID8gbnVsbCA6IHJlc3VsdFswXTtcbiAgd2FyID0gIXdpbm5lcjtcbiAgaWYgKHdpbm5lcikge1xuICAgIC8vIGNvbnNvbGUubG9nKHdpbm5lci5wbGF5ZXIpO1xuICAgIHJld2FyZCh3aW5uZXIucGxheWVyKTtcbiAgfVxuICBjb3VudCgpO1xuICBjb25zb2xlLmxvZygnOjo9PT09PS0tLS0tPT09PT06OicpO1xufVxuXG5jb25zdCBwbGF5ID0gZnVuY3Rpb24od2FyKSB7XG4gIGNvbnNvbGUubG9nKCdwbGF5aW5nJyk7XG4gIGlmICh3YXIpIGNvbnNvbGUubG9nKCd3YXJyaW5nJyk7XG4gIGlmICh3YXIpIHdhZ2VyKCk7XG4gIGlmICh3YXIpIHdhcnMrKztcbiAgbGV0IHBsYXlzID0gaGFuZHMubWFwKGhhbmQgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBwbGF5ZXI6IGhhbmQubmFtZSxcbiAgICAgIGNhcmQ6IGhhbmQucGxheSgpXG4gICAgfVxuICB9KTtcbiAgcGxheXMuZm9yRWFjaChwbGF5ID0+IHsgcG9vbC5wdXNoKHBsYXkuY2FyZCk7IH0pO1xuICByZXR1cm4ocGxheXMpO1xufVxuXG5jb25zdCBzaG93ID0gZnVuY3Rpb24ocGxheXMpIHtcbiAgY29uc29sZS5sb2coJ3Nob3dpbmcnKTtcbiAgcGxheXMuZm9yRWFjaChwbGF5ID0+IHtcbiAgICBsZXQgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3BsYXkucGxheWVyfSAucGxheWApO1xuICAgIGxldCBpbWcgPSBgaW1nL2NhcmRzLyR7cGxheS5jYXJkLnN1aXR9JHtwbGF5LmNhcmQuZmFjZX0ucG5nYDtcbiAgICBlbGVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtpbWd9KWA7XG4gIH0pO1xufVxuXG5jb25zdCByZXNvbHZlID0gZnVuY3Rpb24ocGxheXMpIHtcbiAgY29uc29sZS5sb2coJ3Jlc29sdmluZycpO1xuICBsZXQgbWF4ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgcGxheXMubWFwKHBsYXkgPT4gcGxheS5jYXJkLnZhbHVlKSk7XG4gIHJldHVybiBwbGF5cy5yZWR1Y2UoKGFjYywgcGxheSkgPT4ge1xuICAgIGlmIChwbGF5LmNhcmQudmFsdWUgPT09IG1heCkgYWNjLnB1c2gocGxheSk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwgW10pO1xufVxuXG5jb25zdCB3YWdlciA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnd2FnZXJpbmcnKTtcbiAgaGFuZHMuZm9yRWFjaChoYW5kID0+IHtcbiAgICBwb29sLnB1c2goaGFuZC5wbGF5KCkpO1xuICB9KTtcbn1cblxuY29uc3QgcmV3YXJkID0gZnVuY3Rpb24od2lubmVyKSB7XG4gIGNvbnNvbGUubG9nKCdyZXdhcmRpbmcnKTtcbiAgY29uc29sZS5sb2coJ3N3aW5nJywgcG9vbC5sZW5ndGgpO1xuICBtYXhTd2luZyA9IHBvb2wubGVuZ3RoID4gbWF4U3dpbmcgPyBwb29sLmxlbmd0aCA6IG1heFN3aW5nO1xuICBIZWxwZXIuc2h1ZmZsZXIocG9vbCk7XG4gIGhhbmRzLmZvckVhY2goaGFuZCA9PiB7XG4gICAgaWYgKGhhbmQubmFtZSA9PT0gd2lubmVyKSB7XG4gICAgICB3aGlsZSAocG9vbC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGhhbmQudGFrZShwb29sLnNoaWZ0KCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cblxuY29uc3QgY291bnQgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJ2NvdW50aW5nJyk7XG4gIGhhbmRzLmZvckVhY2goaGFuZCA9PiB7XG4gICAgbGV0IGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtoYW5kLm5hbWV9IC5jb3VudGApO1xuICAgIGlmIChoYW5kLmNhcmRzLmxlbmd0aCA9PT0gMCkgbG9zZXIoaGFuZC5uYW1lKTtcbiAgICBlbGVtLmlubmVySFRNTCA9IGhhbmQuY2FyZHMubGVuZ3RoLnRvU3RyaW5nKCk7XG4gIH0pO1xufVxuXG5jb25zdCBsb3NlciA9IGZ1bmN0aW9uKHBsYXllcikge1xuICBsZXQgcmVtb3ZlID0gaGFuZHMucmVkdWNlKChhY2MsIGhhbmQsIGluZGV4KSA9PiB7XG4gICAgcmV0dXJuIGhhbmQuY2FyZHMubGVuZ3RoID09PSAwID8gaW5kZXggOiBhY2M7XG4gIH0sIDApO1xuICBoYW5kcy5zcGxpY2UocmVtb3ZlLCAxKTtcbiAgdmljdG9yKCk7XG59XG5cbmNvbnN0IHZpY3RvciA9IGZ1bmN0aW9uKCkge1xuICBpZiAoaGFuZHMubGVuZ3RoID09PSAxKSB7XG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICBsZXQgd2lubmVyID0gaGFuZHMuc2hpZnQoKTtcbiAgICByZXdhcmQod2lubmVyLnBsYXllcik7XG4gICAgY291bnQoKTtcbiAgICBjb25zb2xlLmxvZyh3aW5uZXIubmFtZSwgJ3dpbnMhJyk7XG4gICAgY29uc29sZS5sb2cocm91bmRzLCAncm91bmRzIHBsYXllZCEnKTtcbiAgICBjb25zb2xlLmxvZyh3YXJzLCAnd2FycyBmb3VnaHQhJyk7XG4gICAgY29uc29sZS5sb2cobWF4U3dpbmcsICd3YXMgdGhlIGhpZ2hlc3QgY2FyZCBzd2luZyEnKTtcbiAgfVxufVxuXG5kZWNrLnNodWZmbGUoKTtcbmRlY2suZGVhbChoYW5kcyk7XG5cbmNvdW50KCk7XG5cbmxldCBpbnRlcnZhbElkO1xucGxheWVyRGVjay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJvdW5kKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGV2dCA9PiB7XG4gIGlmIChldnQua2V5Q29kZSA9PT0gMzIpIHtcbiAgICBpZiAoaW50ZXJ2YWxJZCkgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwocm91bmQsIDUwKTtcbiAgfVxufSlcbiJdfQ=="}