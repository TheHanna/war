{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/deck.js","js/hand.js","js/main.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export default class Deck {\n  constructor() {\n    const suits = ['hearts', 'clubs', 'spades', 'diamonds'];\n    const faces = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'j', 'q', 'k', 'a'];\n    const types = ['two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine',\n    'ten', 'jack', 'queen', 'king', 'ace'];\n\n    this.cards = suits.reduce((acc, suit) => {\n      faces.forEach((face, index) => {\n        acc.push({suit: suit, face: face, type: types[index], value: index + 1})\n      });\n      return acc;\n    }, []);\n  }\n\n  shuffle() {\n    var m = this.cards.length, t, i;\n    // While there remain elements to shuffle\n    while (m) {\n      // Pick a remaining element\n      i = Math.floor(Math.random() * m--);\n      // And swap it with the current element\n      t = this.cards[m];\n      this.cards[m] = this.cards[i];\n      this.cards[i] = t;\n    }\n  }\n\n  deal(hands) {\n    this.cards.forEach((card, index) => {\n      let hand = hands[index%hands.length];\n      hand.take(card);\n    });\n  }\n}","export default class Hand {\n  constructor(name) {\n    this.name = name;\n    this.cards = [];\n  }\n\n  play() {\n    return this.cards ? this.cards.shift() : null;\n  }\n\n  take(card) {\n    this.cards.push(card);\n  }\n}","import Deck from './deck';\nimport Hand from './hand';\n\nconst deck = new Deck();\nconst hands = [\n  new Hand('player'),\n  new Hand('computer')\n];\n\nconst play = function() {\n  let plays = hands.map(hand => {\n    return {\n      player: hand.name,\n      card: hand.play()\n    }\n  });\n  return(plays);\n}\n\nconst show = function(plays) {\n  plays.forEach(play => {\n    let elem = document.querySelector(`.${play.player} .play`);\n    let img = `img/cards/${play.card.suit}${play.card.face}.png`;\n    elem.style.backgroundImage = `url(${img})`;\n  });\n}\n\nconst resolve = function(plays) {\n  let max = Math.max.apply(Math, plays.map(play => play.card.value));\n  return plays.reduce((acc, play) => {\n    if (play.card.value === max) acc.push(play);\n    return acc;\n  }, []);\n}\n\nconst count = function() {\n  hands.forEach(hand => {\n    let elem = document.querySelector(`.${hand.name} .count`);\n    elem.innerHTML = hand.cards.length.toString();\n  });\n}\n\nconst victor = function(p, c) {\n  if (p.value !== c.value) {\n    let winner = p.value > c.value ? 'Player' : 'Computer';\n    console.log(`${winner} wins!`);\n    hands[winner.toLowerCase()].push(...shuffle(pool));\n    pool = [];\n    count();\n  } else {\n    war = true;\n    console.log('War!');\n  }\n}\n\nlet war = false;\nlet pool = [];\nlet playerDeck = document.querySelector('.player .deck');\n\ndeck.shuffle();\ndeck.deal(hands);\n\ncount();\n\nplayerDeck.addEventListener('click', evt => {\n  let plays = play();\n  let winner = resolve(plays);\n  show(plays);\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqc1xcZGVjay5qcyIsImpzXFxoYW5kLmpzIiwianNcXG1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lDQXFCLEk7QUFDbkIsa0JBQWM7QUFBQTs7QUFDWixRQUFNLFFBQVEsQ0FBQyxRQUFELEVBQVcsT0FBWCxFQUFvQixRQUFwQixFQUE4QixVQUE5QixDQUFkO0FBQ0EsUUFBTSxRQUFRLENBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxHQUFYLEVBQWdCLEdBQWhCLEVBQXFCLEdBQXJCLEVBQTBCLEdBQTFCLEVBQStCLEdBQS9CLEVBQW9DLEdBQXBDLEVBQXlDLElBQXpDLEVBQStDLEdBQS9DLEVBQW9ELEdBQXBELEVBQXlELEdBQXpELEVBQThELEdBQTlELENBQWQ7QUFDQSxRQUFNLFFBQVEsQ0FBQyxLQUFELEVBQVEsT0FBUixFQUFpQixNQUFqQixFQUF5QixNQUF6QixFQUFpQyxLQUFqQyxFQUF3QyxPQUF4QyxFQUFpRCxPQUFqRCxFQUEwRCxNQUExRCxFQUNkLEtBRGMsRUFDUCxNQURPLEVBQ0MsT0FERCxFQUNVLE1BRFYsRUFDa0IsS0FEbEIsQ0FBZDs7QUFHQSxTQUFLLEtBQUwsR0FBYSxNQUFNLE1BQU4sQ0FBYSxVQUFDLEdBQUQsRUFBTSxJQUFOLEVBQWU7QUFDdkMsWUFBTSxPQUFOLENBQWMsVUFBQyxJQUFELEVBQU8sS0FBUCxFQUFpQjtBQUM3QixZQUFJLElBQUosQ0FBUyxFQUFDLE1BQU0sSUFBUCxFQUFhLE1BQU0sSUFBbkIsRUFBeUIsTUFBTSxNQUFNLEtBQU4sQ0FBL0IsRUFBNkMsT0FBTyxRQUFRLENBQTVELEVBQVQ7QUFDRCxPQUZEO0FBR0EsYUFBTyxHQUFQO0FBQ0QsS0FMWSxFQUtWLEVBTFUsQ0FBYjtBQU1EOzs7OzhCQUVTO0FBQ1IsVUFBSSxJQUFJLEtBQUssS0FBTCxDQUFXLE1BQW5CO0FBQUEsVUFBMkIsQ0FBM0I7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QUFDdkIsUUFBSSxTQUFTLEVBQUUsS0FBRixHQUFVLEVBQUUsS0FBWixHQUFvQixRQUFwQixHQUErQixVQUE1QztBQUNBLFlBQVEsR0FBUixDQUFlLE1BQWY7QUFDQSxtQ0FBTSxPQUFPLFdBQVAsRUFBTixHQUE0QixJQUE1QixpREFBb0MsUUFBUSxJQUFSLENBQXBDO0FBQ0EsV0FBTyxFQUFQO0FBQ0E7QUFDRCxHQU5ELE1BTU87QUFDTCxVQUFNLElBQU47QUFDQSxZQUFRLEdBQVIsQ0FBWSxNQUFaO0FBQ0Q7QUFDRixDQVhEOztBQWFBLElBQUksTUFBTSxLQUFWO0FBQ0EsSUFBSSxPQUFPLEVBQVg7QUFDQSxJQUFJLGFBQWEsU0FBUyxhQUFULENBQXVCLGVBQXZCLENBQWpCOztBQUVBLEtBQUssT0FBTDtBQUNBLEtBQUssSUFBTCxDQUFVLEtBQVY7O0FBRUE7O0FBRUEsV0FBVyxnQkFBWCxDQUE0QixPQUE1QixFQUFxQyxlQUFPO0FBQzFDLE1BQUksUUFBUSxNQUFaO0FBQ0EsTUFBSSxTQUFTLFFBQVEsS0FBUixDQUFiO0FBQ0EsT0FBSyxLQUFMO0FBQ0QsQ0FKRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEZWNrIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgY29uc3Qgc3VpdHMgPSBbJ2hlYXJ0cycsICdjbHVicycsICdzcGFkZXMnLCAnZGlhbW9uZHMnXTtcbiAgICBjb25zdCBmYWNlcyA9IFsnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzEwJywgJ2onLCAncScsICdrJywgJ2EnXTtcbiAgICBjb25zdCB0eXBlcyA9IFsndHdvJywgJ3RocmVlJywgJ2ZvdXInLCAnZml2ZScsICdzaXgnLCAnc2V2ZW4nLCAnZWlnaHQnLCAnbmluZScsXG4gICAgJ3RlbicsICdqYWNrJywgJ3F1ZWVuJywgJ2tpbmcnLCAnYWNlJ107XG5cbiAgICB0aGlzLmNhcmRzID0gc3VpdHMucmVkdWNlKChhY2MsIHN1aXQpID0+IHtcbiAgICAgIGZhY2VzLmZvckVhY2goKGZhY2UsIGluZGV4KSA9PiB7XG4gICAgICAgIGFjYy5wdXNoKHtzdWl0OiBzdWl0LCBmYWNlOiBmYWNlLCB0eXBlOiB0eXBlc1tpbmRleF0sIHZhbHVlOiBpbmRleCArIDF9KVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIFtdKTtcbiAgfVxuXG4gIHNodWZmbGUoKSB7XG4gICAgdmFyIG0gPSB0aGlzLmNhcmRzLmxlbmd0aCwgdCwgaTtcbiAgICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZVxuICAgIHdoaWxlIChtKSB7XG4gICAgICAvLyBQaWNrIGEgcmVtYWluaW5nIGVsZW1lbnRcbiAgICAgIGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtLS0pO1xuICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgICB0ID0gdGhpcy5jYXJkc1ttXTtcbiAgICAgIHRoaXMuY2FyZHNbbV0gPSB0aGlzLmNhcmRzW2ldO1xuICAgICAgdGhpcy5jYXJkc1tpXSA9IHQ7XG4gICAgfVxuICB9XG5cbiAgZGVhbChoYW5kcykge1xuICAgIHRoaXMuY2FyZHMuZm9yRWFjaCgoY2FyZCwgaW5kZXgpID0+IHtcbiAgICAgIGxldCBoYW5kID0gaGFuZHNbaW5kZXglaGFuZHMubGVuZ3RoXTtcbiAgICAgIGhhbmQudGFrZShjYXJkKTtcbiAgICB9KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEhhbmQge1xuICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmNhcmRzID0gW107XG4gIH1cblxuICBwbGF5KCkge1xuICAgIHJldHVybiB0aGlzLmNhcmRzID8gdGhpcy5jYXJkcy5zaGlmdCgpIDogbnVsbDtcbiAgfVxuXG4gIHRha2UoY2FyZCkge1xuICAgIHRoaXMuY2FyZHMucHVzaChjYXJkKTtcbiAgfVxufSIsImltcG9ydCBEZWNrIGZyb20gJy4vZGVjayc7XG5pbXBvcnQgSGFuZCBmcm9tICcuL2hhbmQnO1xuXG5jb25zdCBkZWNrID0gbmV3IERlY2soKTtcbmNvbnN0IGhhbmRzID0gW1xuICBuZXcgSGFuZCgncGxheWVyJyksXG4gIG5ldyBIYW5kKCdjb21wdXRlcicpXG5dO1xuXG5jb25zdCBwbGF5ID0gZnVuY3Rpb24oKSB7XG4gIGxldCBwbGF5cyA9IGhhbmRzLm1hcChoYW5kID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgcGxheWVyOiBoYW5kLm5hbWUsXG4gICAgICBjYXJkOiBoYW5kLnBsYXkoKVxuICAgIH1cbiAgfSk7XG4gIHJldHVybihwbGF5cyk7XG59XG5cbmNvbnN0IHNob3cgPSBmdW5jdGlvbihwbGF5cykge1xuICBwbGF5cy5mb3JFYWNoKHBsYXkgPT4ge1xuICAgIGxldCBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cGxheS5wbGF5ZXJ9IC5wbGF5YCk7XG4gICAgbGV0IGltZyA9IGBpbWcvY2FyZHMvJHtwbGF5LmNhcmQuc3VpdH0ke3BsYXkuY2FyZC5mYWNlfS5wbmdgO1xuICAgIGVsZW0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2ltZ30pYDtcbiAgfSk7XG59XG5cbmNvbnN0IHJlc29sdmUgPSBmdW5jdGlvbihwbGF5cykge1xuICBsZXQgbWF4ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgcGxheXMubWFwKHBsYXkgPT4gcGxheS5jYXJkLnZhbHVlKSk7XG4gIHJldHVybiBwbGF5cy5yZWR1Y2UoKGFjYywgcGxheSkgPT4ge1xuICAgIGlmIChwbGF5LmNhcmQudmFsdWUgPT09IG1heCkgYWNjLnB1c2gocGxheSk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwgW10pO1xufVxuXG5jb25zdCBjb3VudCA9IGZ1bmN0aW9uKCkge1xuICBoYW5kcy5mb3JFYWNoKGhhbmQgPT4ge1xuICAgIGxldCBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aGFuZC5uYW1lfSAuY291bnRgKTtcbiAgICBlbGVtLmlubmVySFRNTCA9IGhhbmQuY2FyZHMubGVuZ3RoLnRvU3RyaW5nKCk7XG4gIH0pO1xufVxuXG5jb25zdCB2aWN0b3IgPSBmdW5jdGlvbihwLCBjKSB7XG4gIGlmIChwLnZhbHVlICE9PSBjLnZhbHVlKSB7XG4gICAgbGV0IHdpbm5lciA9IHAudmFsdWUgPiBjLnZhbHVlID8gJ1BsYXllcicgOiAnQ29tcHV0ZXInO1xuICAgIGNvbnNvbGUubG9nKGAke3dpbm5lcn0gd2lucyFgKTtcbiAgICBoYW5kc1t3aW5uZXIudG9Mb3dlckNhc2UoKV0ucHVzaCguLi5zaHVmZmxlKHBvb2wpKTtcbiAgICBwb29sID0gW107XG4gICAgY291bnQoKTtcbiAgfSBlbHNlIHtcbiAgICB3YXIgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKCdXYXIhJyk7XG4gIH1cbn1cblxubGV0IHdhciA9IGZhbHNlO1xubGV0IHBvb2wgPSBbXTtcbmxldCBwbGF5ZXJEZWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllciAuZGVjaycpO1xuXG5kZWNrLnNodWZmbGUoKTtcbmRlY2suZGVhbChoYW5kcyk7XG5cbmNvdW50KCk7XG5cbnBsYXllckRlY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldnQgPT4ge1xuICBsZXQgcGxheXMgPSBwbGF5KCk7XG4gIGxldCB3aW5uZXIgPSByZXNvbHZlKHBsYXlzKTtcbiAgc2hvdyhwbGF5cyk7XG59KTtcbiJdfQ=="}