{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/deck.js","js/hand.js","js/helper.js","js/main.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Helper from './helper';\n\nexport default class Deck {\n  constructor() {\n    const suits = ['hearts', 'clubs', 'spades', 'diamonds'];\n    const faces = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'j', 'q', 'k', 'a'];\n    const types = ['two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine',\n    'ten', 'jack', 'queen', 'king', 'ace'];\n\n    this.cards = suits.reduce((acc, suit) => {\n      faces.forEach((face, index) => {\n        acc.push({suit: suit, face: face, type: types[index], value: index + 1})\n      });\n      return acc;\n    }, []);\n  }\n\n  shuffle() {\n    Helper.shuffler(this.cards);\n  }\n\n  deal(hands) {\n    this.cards.forEach((card, index) => {\n      let hand = hands[index%hands.length];\n      hand.take(card);\n    });\n  }\n}","export default class Hand {\n  constructor(name) {\n    this.name = name;\n    this.cards = [];\n  }\n\n  play() {\n    return this.cards ? this.cards.shift() : null;\n  }\n\n  take(card) {\n    this.cards.push(card);\n  }\n}","const Helper = {\n  shuffler: function(cards) {\n    var m = cards.length, t, i;\n    // While there remain elements to shuffle\n    while (m) {\n      // Pick a remaining element\n      i = Math.floor(Math.random() * m--);\n      // And swap it with the current element\n      t = cards[m];\n      cards[m] = cards[i];\n      cards[i] = t;\n    }\n  }\n}\n\nexport default Helper;","import Deck from './deck';\nimport Hand from './hand';\nimport Helper from './helper';\n\nconst deck = new Deck();\nlet hands = [\n  new Hand('player'),\n  new Hand('computer')\n];\n\nlet war = false;\nlet pool = [];\nlet playerDeck = document.querySelector('.player .deck');\n\nconst round = function() {\n  let plays = play(war);\n  show(plays);\n  let result = resolve(plays);\n  let winner = result.length > 1 ? null : result[0];\n  war = !winner;\n  if (winner) {\n    console.log(winner.player);\n    reward(winner.player);\n  }\n  count();\n}\n\nconst play = function(war) {\n  if (war) wager();\n  let plays = hands.map(hand => {\n    return {\n      player: hand.name,\n      card: hand.play()\n    }\n  });\n  plays.forEach(play => { pool.push(play.card); });\n  return(plays);\n}\n\nconst show = function(plays) {\n  plays.forEach(play => {\n    let elem = document.querySelector(`.${play.player} .play`);\n    let img = `img/cards/${play.card.suit}${play.card.face}.png`;\n    elem.style.backgroundImage = `url(${img})`;\n  });\n}\n\nconst resolve = function(plays) {\n  let max = Math.max.apply(Math, plays.map(play => play.card.value));\n  return plays.reduce((acc, play) => {\n    if (play.card.value === max) acc.push(play);\n    return acc;\n  }, []);\n}\n\nconst wager = function() {\n  hands.forEach(hand => {\n    pool.push(hand.play());\n  });\n}\n\nconst reward = function(winner) {\n  Helper.shuffler(pool);\n  hands.forEach(hand => {\n    if (hand.name === winner) {\n      while (pool.length > 0) {\n        hand.take(pool.shift());\n      }\n    }\n  })\n}\n\nconst count = function() {\n  hands.forEach(hand => {\n    let elem = document.querySelector(`.${hand.name} .count`);\n    if (hand.cards.length === 0) loser(hand.name);\n    elem.innerHTML = hand.cards.length.toString();\n  });\n}\n\nconst loser = function(player) {\n  let remove = hands.reduce((acc, hand, index) => {\n    return hand.cards.length === 0 ? index : acc;\n  }, 0);\n  hands.splice(remove, 1);\n  victor();\n}\n\nconst victor = function() {\n  if (hands.length === 1) {\n    clearInterval(intervalId);\n    let winner = hands.shift();\n    console.log(winner.name, 'wins!');\n  }\n}\n\ndeck.shuffle();\ndeck.deal(hands);\n\ncount();\n\nlet intervalId;\nplayerDeck.addEventListener('click', round);\nwindow.addEventListener('keyup', evt => {\n  if (evt.keyCode === 32) {\n    if (intervalId) clearInterval(intervalId);\n    intervalId = setInterval(round, 250);\n  }\n})\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqc1xcZGVjay5qcyIsImpzXFxoYW5kLmpzIiwianNcXGhlbHBlci5qcyIsImpzXFxtYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7SUFFcUIsSTtBQUNuQixrQkFBYztBQUFBOztBQUNaLFFBQU0sUUFBUSxDQUFDLFFBQUQsRUFBVyxPQUFYLEVBQW9CLFFBQXBCLEVBQThCLFVBQTlCLENBQWQ7QUFDQSxRQUFNLFFBQVEsQ0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEdBQVgsRUFBZ0IsR0FBaEIsRUFBcUIsR0FBckIsRUFBMEIsR0FBMUIsRUFBK0IsR0FBL0IsRUFBb0MsR0FBcEMsRUFBeUMsSUFBekMsRUFBK0MsR0FBL0MsRUFBb0QsR0FBcEQsRUFBeUQsR0FBekQsRUFBOEQsR0FBOUQsQ0FBZDtBQUNBLFFBQU0sUUFBUSxDQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLE1BQWpCLEVBQXlCLE1BQXpCLEVBQWlDLEtBQWpDLEVBQXdDLE9BQXhDLEVBQWlELE9BQWpELEVBQTBELE1BQTFELEVBQ2QsS0FEYyxFQUNQLE1BRE8sRUFDQyxPQURELEVBQ1UsTUFEVixFQUNrQixLQURsQixDQUFkOztBQUdBLFNBQUssS0FBTCxHQUFhLE1BQU0sTUFBTixDQUFhLFVBQUMsR0FBRCxFQUFNLElBQU4sRUFBZTtBQUN2QyxZQUFNLE9BQU4sQ0FBYyxVQUFDLElBQUQsRUFBTyxLQUFQLEVBQWlCO0FBQzdCLFlBQUksSUFBSixDQUFTLEVBQUMsTUFBTSxJQUFQLEVBQWEsTUFBTSxJQUFuQixFQUF5QixNQUFNLE1BQU0sS0FBTixDQUEvQixFQUE2QyxPQUFPLFFBQVEsQ0FBNUQsRUFBVDtBQUNELE9BRkQ7QUFHQSxhQUFPLEdBQVA7QUFDRCxLQUxZLEVBS1YsRUFMVSxDQUFiO0FBTUQ7Ozs7OEJBRVM7QUFDUix1QkFBTyxRQUFQLENBQWdCLEtBQUss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QVMsTUFBVCxFQUFpQjtBQUM3QixNQUFJLFNBQVMsTUFBTSxNQUFOLENBQWEsVUFBQyxHQUFELEVBQU0sSUFBTixFQUFZLEtBQVosRUFBc0I7QUFDOUMsV0FBTyxLQUFLLEtBQUwsQ0FBVyxNQUFYLEtBQXNCLENBQXRCLEdBQTBCLEtBQTFCLEdBQWtDLEdBQXpDO0FBQ0QsR0FGWSxFQUVWLENBRlUsQ0FBYjtBQUdBLFFBQU0sTUFBTixDQUFhLE1BQWIsRUFBcUIsQ0FBckI7QUFDQTtBQUNELENBTkQ7O0FBUUEsSUFBTSxTQUFTLFNBQVQsTUFBUyxHQUFXO0FBQ3hCLE1BQUksTUFBTSxNQUFOLEtBQWlCLENBQXJCLEVBQXdCO0FBQ3RCLGtCQUFjLFVBQWQ7QUFDQSxRQUFJLFNBQVMsTUFBTSxLQUFOLEVBQWI7QUFDQSxZQUFRLEdBQVIsQ0FBWSxPQUFPLElBQW5CLEVBQXlCLE9BQXpCO0FBQ0Q7QUFDRixDQU5EOztBQVFBLEtBQUssT0FBTDtBQUNBLEtBQUssSUFBTCxDQUFVLEtBQVY7O0FBRUE7O0FBRUEsSUFBSSxtQkFBSjtBQUNBLFdBQVcsZ0JBQVgsQ0FBNEIsT0FBNUIsRUFBcUMsS0FBckM7QUFDQSxPQUFPLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLGVBQU87QUFDdEMsTUFBSSxJQUFJLE9BQUosS0FBZ0IsRUFBcEIsRUFBd0I7QUFDdEIsUUFBSSxVQUFKLEVBQWdCLGNBQWMsVUFBZDtBQUNoQixpQkFBYSxZQUFZLEtBQVosRUFBbUIsR0FBbkIsQ0FBYjtBQUNEO0FBQ0YsQ0FMRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgSGVscGVyIGZyb20gJy4vaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVjayB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IHN1aXRzID0gWydoZWFydHMnLCAnY2x1YnMnLCAnc3BhZGVzJywgJ2RpYW1vbmRzJ107XG4gICAgY29uc3QgZmFjZXMgPSBbJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcxMCcsICdqJywgJ3EnLCAnaycsICdhJ107XG4gICAgY29uc3QgdHlwZXMgPSBbJ3R3bycsICd0aHJlZScsICdmb3VyJywgJ2ZpdmUnLCAnc2l4JywgJ3NldmVuJywgJ2VpZ2h0JywgJ25pbmUnLFxuICAgICd0ZW4nLCAnamFjaycsICdxdWVlbicsICdraW5nJywgJ2FjZSddO1xuXG4gICAgdGhpcy5jYXJkcyA9IHN1aXRzLnJlZHVjZSgoYWNjLCBzdWl0KSA9PiB7XG4gICAgICBmYWNlcy5mb3JFYWNoKChmYWNlLCBpbmRleCkgPT4ge1xuICAgICAgICBhY2MucHVzaCh7c3VpdDogc3VpdCwgZmFjZTogZmFjZSwgdHlwZTogdHlwZXNbaW5kZXhdLCB2YWx1ZTogaW5kZXggKyAxfSlcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCBbXSk7XG4gIH1cblxuICBzaHVmZmxlKCkge1xuICAgIEhlbHBlci5zaHVmZmxlcih0aGlzLmNhcmRzKTtcbiAgfVxuXG4gIGRlYWwoaGFuZHMpIHtcbiAgICB0aGlzLmNhcmRzLmZvckVhY2goKGNhcmQsIGluZGV4KSA9PiB7XG4gICAgICBsZXQgaGFuZCA9IGhhbmRzW2luZGV4JWhhbmRzLmxlbmd0aF07XG4gICAgICBoYW5kLnRha2UoY2FyZCk7XG4gICAgfSk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBIYW5kIHtcbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5jYXJkcyA9IFtdO1xuICB9XG5cbiAgcGxheSgpIHtcbiAgICByZXR1cm4gdGhpcy5jYXJkcyA/IHRoaXMuY2FyZHMuc2hpZnQoKSA6IG51bGw7XG4gIH1cblxuICB0YWtlKGNhcmQpIHtcbiAgICB0aGlzLmNhcmRzLnB1c2goY2FyZCk7XG4gIH1cbn0iLCJjb25zdCBIZWxwZXIgPSB7XG4gIHNodWZmbGVyOiBmdW5jdGlvbihjYXJkcykge1xuICAgIHZhciBtID0gY2FyZHMubGVuZ3RoLCB0LCBpO1xuICAgIC8vIFdoaWxlIHRoZXJlIHJlbWFpbiBlbGVtZW50cyB0byBzaHVmZmxlXG4gICAgd2hpbGUgKG0pIHtcbiAgICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudFxuICAgICAgaSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG0tLSk7XG4gICAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnRcbiAgICAgIHQgPSBjYXJkc1ttXTtcbiAgICAgIGNhcmRzW21dID0gY2FyZHNbaV07XG4gICAgICBjYXJkc1tpXSA9IHQ7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEhlbHBlcjsiLCJpbXBvcnQgRGVjayBmcm9tICcuL2RlY2snO1xuaW1wb3J0IEhhbmQgZnJvbSAnLi9oYW5kJztcbmltcG9ydCBIZWxwZXIgZnJvbSAnLi9oZWxwZXInO1xuXG5jb25zdCBkZWNrID0gbmV3IERlY2soKTtcbmxldCBoYW5kcyA9IFtcbiAgbmV3IEhhbmQoJ3BsYXllcicpLFxuICBuZXcgSGFuZCgnY29tcHV0ZXInKVxuXTtcblxubGV0IHdhciA9IGZhbHNlO1xubGV0IHBvb2wgPSBbXTtcbmxldCBwbGF5ZXJEZWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllciAuZGVjaycpO1xuXG5jb25zdCByb3VuZCA9IGZ1bmN0aW9uKCkge1xuICBsZXQgcGxheXMgPSBwbGF5KHdhcik7XG4gIHNob3cocGxheXMpO1xuICBsZXQgcmVzdWx0ID0gcmVzb2x2ZShwbGF5cyk7XG4gIGxldCB3aW5uZXIgPSByZXN1bHQubGVuZ3RoID4gMSA/IG51bGwgOiByZXN1bHRbMF07XG4gIHdhciA9ICF3aW5uZXI7XG4gIGlmICh3aW5uZXIpIHtcbiAgICBjb25zb2xlLmxvZyh3aW5uZXIucGxheWVyKTtcbiAgICByZXdhcmQod2lubmVyLnBsYXllcik7XG4gIH1cbiAgY291bnQoKTtcbn1cblxuY29uc3QgcGxheSA9IGZ1bmN0aW9uKHdhcikge1xuICBpZiAod2FyKSB3YWdlcigpO1xuICBsZXQgcGxheXMgPSBoYW5kcy5tYXAoaGFuZCA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBsYXllcjogaGFuZC5uYW1lLFxuICAgICAgY2FyZDogaGFuZC5wbGF5KClcbiAgICB9XG4gIH0pO1xuICBwbGF5cy5mb3JFYWNoKHBsYXkgPT4geyBwb29sLnB1c2gocGxheS5jYXJkKTsgfSk7XG4gIHJldHVybihwbGF5cyk7XG59XG5cbmNvbnN0IHNob3cgPSBmdW5jdGlvbihwbGF5cykge1xuICBwbGF5cy5mb3JFYWNoKHBsYXkgPT4ge1xuICAgIGxldCBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cGxheS5wbGF5ZXJ9IC5wbGF5YCk7XG4gICAgbGV0IGltZyA9IGBpbWcvY2FyZHMvJHtwbGF5LmNhcmQuc3VpdH0ke3BsYXkuY2FyZC5mYWNlfS5wbmdgO1xuICAgIGVsZW0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2ltZ30pYDtcbiAgfSk7XG59XG5cbmNvbnN0IHJlc29sdmUgPSBmdW5jdGlvbihwbGF5cykge1xuICBsZXQgbWF4ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgcGxheXMubWFwKHBsYXkgPT4gcGxheS5jYXJkLnZhbHVlKSk7XG4gIHJldHVybiBwbGF5cy5yZWR1Y2UoKGFjYywgcGxheSkgPT4ge1xuICAgIGlmIChwbGF5LmNhcmQudmFsdWUgPT09IG1heCkgYWNjLnB1c2gocGxheSk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwgW10pO1xufVxuXG5jb25zdCB3YWdlciA9IGZ1bmN0aW9uKCkge1xuICBoYW5kcy5mb3JFYWNoKGhhbmQgPT4ge1xuICAgIHBvb2wucHVzaChoYW5kLnBsYXkoKSk7XG4gIH0pO1xufVxuXG5jb25zdCByZXdhcmQgPSBmdW5jdGlvbih3aW5uZXIpIHtcbiAgSGVscGVyLnNodWZmbGVyKHBvb2wpO1xuICBoYW5kcy5mb3JFYWNoKGhhbmQgPT4ge1xuICAgIGlmIChoYW5kLm5hbWUgPT09IHdpbm5lcikge1xuICAgICAgd2hpbGUgKHBvb2wubGVuZ3RoID4gMCkge1xuICAgICAgICBoYW5kLnRha2UocG9vbC5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG5cbmNvbnN0IGNvdW50ID0gZnVuY3Rpb24oKSB7XG4gIGhhbmRzLmZvckVhY2goaGFuZCA9PiB7XG4gICAgbGV0IGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtoYW5kLm5hbWV9IC5jb3VudGApO1xuICAgIGlmIChoYW5kLmNhcmRzLmxlbmd0aCA9PT0gMCkgbG9zZXIoaGFuZC5uYW1lKTtcbiAgICBlbGVtLmlubmVySFRNTCA9IGhhbmQuY2FyZHMubGVuZ3RoLnRvU3RyaW5nKCk7XG4gIH0pO1xufVxuXG5jb25zdCBsb3NlciA9IGZ1bmN0aW9uKHBsYXllcikge1xuICBsZXQgcmVtb3ZlID0gaGFuZHMucmVkdWNlKChhY2MsIGhhbmQsIGluZGV4KSA9PiB7XG4gICAgcmV0dXJuIGhhbmQuY2FyZHMubGVuZ3RoID09PSAwID8gaW5kZXggOiBhY2M7XG4gIH0sIDApO1xuICBoYW5kcy5zcGxpY2UocmVtb3ZlLCAxKTtcbiAgdmljdG9yKCk7XG59XG5cbmNvbnN0IHZpY3RvciA9IGZ1bmN0aW9uKCkge1xuICBpZiAoaGFuZHMubGVuZ3RoID09PSAxKSB7XG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICBsZXQgd2lubmVyID0gaGFuZHMuc2hpZnQoKTtcbiAgICBjb25zb2xlLmxvZyh3aW5uZXIubmFtZSwgJ3dpbnMhJyk7XG4gIH1cbn1cblxuZGVjay5zaHVmZmxlKCk7XG5kZWNrLmRlYWwoaGFuZHMpO1xuXG5jb3VudCgpO1xuXG5sZXQgaW50ZXJ2YWxJZDtcbnBsYXllckRlY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByb3VuZCk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBldnQgPT4ge1xuICBpZiAoZXZ0LmtleUNvZGUgPT09IDMyKSB7XG4gICAgaWYgKGludGVydmFsSWQpIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG4gICAgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHJvdW5kLCAyNTApO1xuICB9XG59KVxuIl19"}